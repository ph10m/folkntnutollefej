<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="loading.css">
	<link rel="stylesheet" href="anim.css">
	<link rel="stylesheet" href="prop.css">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<!-- HIGHLIGHTING -->
	<script src="highlighter/shCore.js"></script>
	<script src="highlighter/shBrushPython.js"></script>
	<script src="highlighter/shBrushCpp.js"></script>
	<link rel="stylesheet" href="highlighter/shCoreEmacs.css">
	<link rel="stylesheet" href="highlighter/shThemeEmacs.css">
	<!-- <link rel="stylesheet" href="highlighter/shThemeDjango.css"> -->
</head>
<body onload="load()" style="margin:10">

<div class="wrapper" id="loader">
	<div class="circle circle-1"></div>
	<div class="circle circle-1a"></div>
	<div class="circle circle-2"></div>
	<div class="circle circle-3"></div>
</div>

<h1 id="loadtext" class="noselect">Entering Toffels world&hellip;</h1>

<!-- rest -->
<div id="rest" class="animate-bottom">
	<div id="title" class="noselect" onclick="home()">Select a subject</div>
	
	<div id="subjects" class="noselect">
		<div id="0" class="subjectBox" onclick="stat()">Statistics TMA4240</div>
		<div id="1" class="subjectBox" onclick="digdat()">Digital Design TDT4160</div>
		<div id="2" class="subjectBox" onclick="algo()">Algorithms TDT4120</div>
		<div id="3" class="subjectBox" onclick="prog()">ProgLab 2 TDT4113</div>
	</div>

	<div class='noselect'>
		<div class='subject_info'>
			<h2 id='main_title'></h2>
			<h3 id='task'></h3>
			<p id='sol1'></p>
			<p id='sol2'></p>
			<p id='sol3'></p>
			<h4 id='desc0'></h4><pre id='code'></pre>
			<h4 id='desc1'></h4><pre id='code1'></pre>
			<h4 id='desc2'></h4><pre id='code2'></pre>
			<h4 id='desc3'></h4><pre id='code3'></pre>
		</div>
	

	</div>
</div>
			

<script>
function hover(item){
//	if (item.style.opacity == 1) item.style.opacity=0.3;
	//else item.style.opacity=1.0;
}



function home(){
	//if ($('#subjects').css('opacity') == 0) $('#subjects').css('opacity', 1);
    //else $('#subjects').css('opacity', 0);
	console.log('pressed home');
}

function stat(){
	reset_page(0);
	show_tab(1,0,0,0);
	}
function digdat(){
	reset_page(1);
	show_tab(0,1,0,0);
	}
function algo(){
	reset_page(2);
	show_tab(0,0,1,0);
	
	insert_page('Oving 1: På sporet av sprengstoff', 'Praksisoppgave, traversering av lenket liste', 'Ved å ta input fra en .txt-fil, som sett under, skal man traversere listen og se om neste node har en større verdi.','','')
	list_url = 'https://raw.githubusercontent.com/ph10m/AlgDat_Git/master/Ovinger/input1.txt';
	ov1_url = 'https://raw.githubusercontent.com/ph10m/AlgDat_Git/master/Ovinger/oving1.py';
	inserthtml('desc0', 'List of values:');
	inserthtml('desc1', 'Python code (main):');
	insert_code(list_url, 'code', 'cpp');
	insert_code(ov1_url, 'code2', 'python');
	
	runStyles();
	}
function prog(){
	reset_page(3);
	show_tab(0,0,0,1);
	
	insert_page('Oving 0: Arduino og Python seriell input/output', 'Introduksjon til seriell informasjonsoverføring.', '', '', '');
	
	arduino_code_url = 'https://raw.githubusercontent.com/ph10m/ProgLab_Git/master/Oving0/Oving0.ino';
	python_code_main = 'https://raw.githubusercontent.com/ph10m/ProgLab_Git/master/Oving0/Oving0.py';
	python_code_morse ='https://raw.githubusercontent.com/ph10m/ProgLab_Git/master/Oving0/morseCode.py';
	python_code_ard = 'https://raw.githubusercontent.com/ph10m/ProgLab_Git/master/Oving0/arduinoSerial.py'
	
	inserthtml('desc0', 'Arduino code:');
	inserthtml('desc1', 'Python code (main):');
	inserthtml('desc2', 'Pyhon code (morse controller):');
	inserthtml('desc3', 'Python code (arduino serial connection):');
	insert_code(arduino_code_url, 'code', 'cpp');
	insert_code(python_code_main, 'code1', 'python');
	insert_code(python_code_morse, 'code2', 'python');
	insert_code(python_code_ard, 'code3', 'python');
	runStyles();
}

function insert_page(title, task, sol1, sol2, sol3){
	inserthtml('main_title', title);
	inserthtml('task', task);
	inserthtml('sol1', sol1);
	inserthtml('sol2', sol2);
	inserthtml('sol3', sol3);
}

function h3(text){
	return '<h3>'+text+'</h3>';
}

function inserthtml(id, text){
	document.getElementById(id).innerHTML = text;
}
		
String.prototype.replaceAll = function(search, replacement) {
    var target = this;
    return target.split(search).join(replacement);
};	
function insert_code(link, id, highlight){
	var headstr = '<pre class="brush: '+highlight+';">';
	var codeStr ='';
	//var codeStr = '';

	$.ajax({
		async:false,
		url:link,
		success: function(data){
			//$('#'+id).text(data);
			codeStr+=data;
			}
	});
	//must replace < with &lt;
	codeStr = codeStr.replaceAll('<', '&lt;');
	headstr+=codeStr;
	headstr+='</pre>';
	//console.log(codeStr);
	//$('#'+id).text(codeStr);
	inserthtml(id, headstr);
}

function reset_page(srcpage){
	//get currently active page
	var doRefresh=true;
	for (var i=0;i<4;i++){ //length of boxes
		if (document.getElementById(i.toString()).style.opacity==1){
			if (i==srcpage){
				console.log('this page has already been loaded!');
				doRefresh = false;
			}
		}
	}
	console.log('Do refresh? '+doRefresh);
	if (doRefresh){
		var tags = ['main_title', 'task', 'sol1', 'sol2', 'sol3',
		'desc0', 'code', 'desc1', 'code1', 'desc2', 'code2', 'desc3', 'code3'];
		for (tag in tags){
			$('#'+tags[tag]).empty();
		}
	}
}

function show_tab(_1,_2,_3,_4){
	var boxes = ['statistics', 'digdat', 'algo', 'proglab'];
	for (var i=0;i<arguments.length;i++){
		displayElem(i, arguments[i]);
		activate(boxes[i],arguments[i]);
	}
}
function activate(tag, enabled){ //enabled is 1 or 0.2
	if ($('#'+tag).css('opacity') == enabled)$('#'+tag).css('opacity', enabled);
    else $('#'+tag).css('opacity', enabled);
}
function displayElem(elem,on){
	elem = elem.toString();
	if (on==0){
		if (document.getElementById(elem).style.opacity>0.3)
		document.getElementById(elem).style.opacity=0.3;
	}
	else if (document.getElementById(elem).style.opacity<1)
		document.getElementById(elem).style.opacity=1;
}


/* LOAD ANIMATION */
function load(){setTimeout(showPage,1000);}
function showPage(){
	document.getElementById("loader").style.display="none";
	document.getElementById("loadtext").style.display="none";
	document.getElementById("rest").style.display="block";
	}
	
function runStyles(){
	SyntaxHighlighter.highlight();
}
</script>
</body>
</html>